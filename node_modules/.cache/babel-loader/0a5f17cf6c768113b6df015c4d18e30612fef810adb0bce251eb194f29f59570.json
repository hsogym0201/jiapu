{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\nimport * as echarts from \"echarts/core\";\nimport { SankeyChart } from \"echarts/charts\";\nimport { TitleComponent, TooltipComponent } from \"echarts/components\";\nimport { CanvasRenderer } from \"echarts/renderers\";\n\n// 注册必要的组件\necharts.use([SankeyChart, TitleComponent, TooltipComponent, CanvasRenderer]);\nexport default {\n  name: \"SangJiTu\",\n  props: {\n    sankeyData: Object // 从父组件传递过来的桑基图数据\n  },\n  watch: {\n    sankeyData(newData) {\n      if (newData && newData.nodes.length > 0) {\n        this.updateChart(newData); // 数据变化时更新图表\n      }\n    }\n  },\n  mounted() {\n    this.initChart();\n  },\n  methods: {\n    initChart() {\n      const chartDom = document.getElementById(\"SangJiTU\");\n      this.myChart = echarts.init(chartDom);\n    },\n    updateChart(sankeyData) {\n      // 简化的颜色设置，每个节点和连接使用相同的颜色\n      const nodeColor = \"#82aaff\"; // 示例颜色\n      const linkColor = \"#cfcfcf\"; // 示例颜色\n\n      const option = {\n        title: {\n          text: \"家族迁徙路径\",\n          left: \"center\"\n        },\n        tooltip: {\n          trigger: \"item\"\n        },\n        series: [{\n          type: \"sankey\",\n          data: sankeyData.nodes.map(node => ({\n            ...node,\n            itemStyle: {\n              color: nodeColor\n            } // 设置节点颜色\n          })),\n          links: sankeyData.links.map(link => ({\n            ...link,\n            itemStyle: {\n              color: linkColor\n            } // 设置连接颜色\n          })),\n          emphasis: {\n            focus: \"adjacency\"\n          },\n          lineStyle: {\n            color: \"source\",\n            opacity: 0.6\n          }\n        }]\n      };\n      this.myChart.setOption(option);\n    }\n  }\n};","map":{"version":3,"names":["echarts","SankeyChart","TitleComponent","TooltipComponent","CanvasRenderer","use","name","props","sankeyData","Object","watch","newData","nodes","length","updateChart","mounted","initChart","methods","chartDom","document","getElementById","myChart","init","nodeColor","linkColor","option","title","text","left","tooltip","trigger","series","type","data","map","node","itemStyle","color","links","link","emphasis","focus","lineStyle","opacity","setOption"],"sources":["D:\\project\\idea-project\\jiapudemo1\\jiapudemo1\\src\\components\\SangJiTu.vue"],"sourcesContent":["<template>\r\n  <div class=\"SangJiTu\">\r\n    <div id=\"SangJiTU\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from \"echarts/core\";\r\nimport { SankeyChart } from \"echarts/charts\";\r\nimport { TitleComponent, TooltipComponent } from \"echarts/components\";\r\nimport { CanvasRenderer } from \"echarts/renderers\";\r\n\r\n// 注册必要的组件\r\necharts.use([SankeyChart, TitleComponent, TooltipComponent, CanvasRenderer]);\r\n\r\nexport default {\r\n  name: \"SangJiTu\",\r\n  props: {\r\n    sankeyData: Object, // 从父组件传递过来的桑基图数据\r\n  },\r\n  watch: {\r\n    sankeyData(newData) {\r\n      if (newData && newData.nodes.length > 0) {\r\n        this.updateChart(newData); // 数据变化时更新图表\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initChart();\r\n  },\r\n  methods: {\r\n    initChart() {\r\n      const chartDom = document.getElementById(\"SangJiTU\");\r\n      this.myChart = echarts.init(chartDom);\r\n    },\r\n\r\n    updateChart(sankeyData) {\r\n      // 简化的颜色设置，每个节点和连接使用相同的颜色\r\n      const nodeColor = \"#82aaff\"; // 示例颜色\r\n      const linkColor = \"#cfcfcf\"; // 示例颜色\r\n\r\n      const option = {\r\n        title: {\r\n          text: \"家族迁徙路径\",\r\n          left: \"center\",\r\n        },\r\n        tooltip: {\r\n          trigger: \"item\",\r\n        },\r\n        series: [\r\n          {\r\n            type: \"sankey\",\r\n            data: sankeyData.nodes.map(node => ({\r\n              ...node,\r\n              itemStyle: { color: nodeColor }, // 设置节点颜色\r\n            })),\r\n            links: sankeyData.links.map(link => ({\r\n              ...link,\r\n              itemStyle: { color: linkColor }, // 设置连接颜色\r\n            })),\r\n            emphasis: {\r\n              focus: \"adjacency\",\r\n            },\r\n            lineStyle: {\r\n              color: \"source\",\r\n              opacity: 0.6,\r\n            },\r\n          },\r\n        ],\r\n      };\r\n\r\n      this.myChart.setOption(option);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.SangJiTu {\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n#SangJiTU {\r\n  width: 80%;\r\n  height: 600px;\r\n  margin: 0 auto;\r\n  background: #fff;\r\n}\r\n</style>\r\n"],"mappings":";AAOA,OAAO,KAAKA,OAAM,MAAO,cAAc;AACvC,SAASC,WAAU,QAAS,gBAAgB;AAC5C,SAASC,cAAc,EAAEC,gBAAe,QAAS,oBAAoB;AACrE,SAASC,cAAa,QAAS,mBAAmB;;AAElD;AACAJ,OAAO,CAACK,GAAG,CAAC,CAACJ,WAAW,EAAEC,cAAc,EAAEC,gBAAgB,EAAEC,cAAc,CAAC,CAAC;AAE5E,eAAe;EACbE,IAAI,EAAE,UAAU;EAChBC,KAAK,EAAE;IACLC,UAAU,EAAEC,MAAM,CAAE;EACtB,CAAC;EACDC,KAAK,EAAE;IACLF,UAAUA,CAACG,OAAO,EAAE;MAClB,IAAIA,OAAM,IAAKA,OAAO,CAACC,KAAK,CAACC,MAAK,GAAI,CAAC,EAAE;QACvC,IAAI,CAACC,WAAW,CAACH,OAAO,CAAC,EAAE;MAC7B;IACF;EACF,CAAC;EACDI,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,SAAS,CAAC,CAAC;EAClB,CAAC;EACDC,OAAO,EAAE;IACPD,SAASA,CAAA,EAAG;MACV,MAAME,QAAO,GAAIC,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;MACpD,IAAI,CAACC,OAAM,GAAIrB,OAAO,CAACsB,IAAI,CAACJ,QAAQ,CAAC;IACvC,CAAC;IAEDJ,WAAWA,CAACN,UAAU,EAAE;MACtB;MACA,MAAMe,SAAQ,GAAI,SAAS,EAAE;MAC7B,MAAMC,SAAQ,GAAI,SAAS,EAAE;;MAE7B,MAAMC,MAAK,GAAI;QACbC,KAAK,EAAE;UACLC,IAAI,EAAE,QAAQ;UACdC,IAAI,EAAE;QACR,CAAC;QACDC,OAAO,EAAE;UACPC,OAAO,EAAE;QACX,CAAC;QACDC,MAAM,EAAE,CACN;UACEC,IAAI,EAAE,QAAQ;UACdC,IAAI,EAAEzB,UAAU,CAACI,KAAK,CAACsB,GAAG,CAACC,IAAG,KAAM;YAClC,GAAGA,IAAI;YACPC,SAAS,EAAE;cAAEC,KAAK,EAAEd;YAAU,CAAC,CAAE;UACnC,CAAC,CAAC,CAAC;UACHe,KAAK,EAAE9B,UAAU,CAAC8B,KAAK,CAACJ,GAAG,CAACK,IAAG,KAAM;YACnC,GAAGA,IAAI;YACPH,SAAS,EAAE;cAAEC,KAAK,EAAEb;YAAU,CAAC,CAAE;UACnC,CAAC,CAAC,CAAC;UACHgB,QAAQ,EAAE;YACRC,KAAK,EAAE;UACT,CAAC;UACDC,SAAS,EAAE;YACTL,KAAK,EAAE,QAAQ;YACfM,OAAO,EAAE;UACX;QACF,CAAC;MAEL,CAAC;MAED,IAAI,CAACtB,OAAO,CAACuB,SAAS,CAACnB,MAAM,CAAC;IAChC;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}